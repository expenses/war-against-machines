language: rust

# Test all 3 channels
rust:
  - stable
  - beta
  - nightly

# Cache packages
cache: cargo

# And both OSes
os:
  - linux
  - osx

matrix:
  # Finish once the required builds complete
  fast_finish: true

  # Breakages in nightly do not fail the overall build
  allow_failures:
    - rust: nightly

before_install:
  # Install sdl2 on OSX
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then brew install sdl2 sdl2_image sdl2_ttf; fi
  # Install sdl2 on Linux
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then yes | sudo add-apt-repository ppa:zoogie/sdl2-snapshots; fi
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then sudo apt-get update -qq; fi
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then sudo apt-get install -qq libsdl2-dev libsdl2-image-dev libsdl2-ttf-dev; fi